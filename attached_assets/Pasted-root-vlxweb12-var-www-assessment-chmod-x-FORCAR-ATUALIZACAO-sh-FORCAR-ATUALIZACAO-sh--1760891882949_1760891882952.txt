root@vlxweb12:/var/www/assessment# chmod +x FORCAR_ATUALIZACAO.sh
./FORCAR_ATUALIZACAO.sh
======================================================================
FOR√áAR ATUALIZA√á√ÉO DO C√ìDIGO
======================================================================

‚úì Backup: backups/force_update_20251019_163739

üîß Configurando Git...
‚úì Git configurado

üîß Resetando para vers√£o remota...
remote: Enumerating objects: 7, done.
remote: Counting objects: 100% (7/7), done.
remote: Compressing objects: 100% (3/3), done.
remote: Total 5 (delta 2), reused 5 (delta 2), pack-reused 0 (from 0)
Unpacking objects: 100% (5/5), 2.94 KiB | 2.94 MiB/s, done.
From https://github.com/GruppenIT/assessment
   b2d3ef4..21db09f  main       -> origin/main
HEAD is now at 21db09f Fix group deletion bug and update deployment script
‚úì C√≥digo resetado

======================================================================
üìÑ FUN√á√ÉO JavaScript NO ARQUIVO:
======================================================================
function confirmarExclusao(grupoNome, tipoId) {
    if (confirm(`Tem certeza que deseja excluir o grupo "${grupoNome}"?\n\nEsta a√ß√£o √© irrevers√≠vel e excluir√° TODOS os assessments p√∫blicos deste grupo!`)) {
        // Criar formul√°rio com CSRF token
        const form = document.createElement('form');
        form.method = 'POST';
        form.action = `/admin/grupos/${encodeURIComponent(grupoNome)}/${tipoId}/delete`;

        // Adicionar CSRF token
        const csrfInput = document.createElement('input');
        csrfInput.type = 'hidden';
        csrfInput.name = 'csrf_token';
        csrfInput.value = '{{ csrf_token() }}';
        form.appendChild(csrfInput);

        document.body.appendChild(form);
        form.submit();
    }
}
</script>
{% endblock %}

======================================================================

üîç Verifica√ß√µes:

‚úì Sem conflito
‚úì Fun√ß√£o existe
‚úì CSRF existe
‚úì Bot√£o existe

C√≥digo do bot√£o:
                                                    class="btn btn-sm btn-outline-danger"
                                                    onclick='confirmarExclusao({{ grupo.nome|tojson }}, {{ grupo.tipo_id }})'>
                                                <i class="fas fa-trash me-1"></i>Excluir
                                            </button>
                                            {% endif %}

üîÑ Reiniciando...
assessment: stopped
assessment: started
assessment                       RUNNING   pid 416814, uptime 0:00:04

======================================================================
‚úì‚úì‚úì CONCLU√çDO! ‚úì‚úì‚úì
======================================================================

üß™ TESTE (IMPORTANTE - CACHE DO NAVEGADOR):

  1. AGUARDE 10 SEGUNDOS

  2. Abra ABA AN√îNIMA:
     Chrome: Ctrl+Shift+N
     Firefox: Ctrl+Shift+P

  3. OU limpe cache COMPLETO:
     F12 ‚Üí Clique direito no reload ‚Üí Empty Cache and Hard Reload

  4. Console (F12), digite:
     typeof confirmarExclusao

  5. Deve retornar: 'function'
     Se 'undefined' ‚Üí Cache n√£o limpo

  6. Clique 'Excluir'

root@vlxweb12:/var/www/assessment