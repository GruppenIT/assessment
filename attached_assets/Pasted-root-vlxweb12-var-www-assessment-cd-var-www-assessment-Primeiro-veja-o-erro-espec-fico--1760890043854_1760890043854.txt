root@vlxweb12:/var/www/assessment# cd /var/www/assessment

# Primeiro, veja o erro especÃ­fico:
./diagnosticar_erro_500.sh

# Depois, restaure e corrija definitivamente:
./restaurar_e_corrigir_definitivo.sh
======================================================================
DIAGNOSTICANDO ERRO 500
======================================================================

1. VERIFICANDO LOGS DE ERRO

Ãšltimas 50 linhas do log (journalctl):
---------------------------------------------------------------------
-- No entries --
---------------------------------------------------------------------

2. VERIFICANDO TEMPLATE grupos_lista.html

Ãšltima linha do template:
}

console.log('DEBUG: Script carregado, funÃ§Ã£o disponÃ­vel:', typeof confirmarExclusao);
</script>
{% endblock %}

3. CONTANDO BLOCOS NO TEMPLATE

{% block extra_js %} = 1
{% endblock %} = 3

======================================================================

SE O ERRO PERSISTIR, EXECUTE:

cd /var/www/assessment
# Restaurar o Ãºltimo backup:
ULTIMO_BACKUP=$(ls -t backups/bloco_scripts_* 2>/dev/null | head -1)
if [ ! -z "$ULTIMO_BACKUP" ]; then
  cp "$ULTIMO_BACKUP/grupos_lista.html" templates/admin/
  sudo supervisorctl restart assessment
  echo 'Backup restaurado!'
fi

======================================================================
Restaurar e Corrigir - DEFINITIVO
======================================================================

PASSO 1: Encontrar e restaurar Ãºltimo backup FUNCIONAL

Restaurando backup: backups/csrf_literal_20251019_153618/grupos_lista.html
âœ“ Backup restaurado

PASSO 2: Criar backup do estado atual

âœ“ Novo backup: backups/restauracao_20251019_160654

PASSO 3: Aplicar correÃ§Ã£o correta (Python)

âœ“ Template corrigido com sucesso
âœ“ Bloco extra_js aplicado
âœ“ CorreÃ§Ã£o aplicada

PASSO 4: Reiniciar serviÃ§o

assessment: stopped
assessment: started
âœ“ Reiniciado via Supervisor

======================================================================
âœ“ CORREÃ‡ÃƒO DEFINITIVA APLICADA!
======================================================================

TESTE AGORA:

1. Limpe o cache (Ctrl+Shift+R)
2. Acesse /admin/grupos
3. A pÃ¡gina DEVE carregar sem erro 500
4. Abra o Console (F12)
5. VocÃª DEVE ver mensagens DEBUG
6. Clique em 'Excluir' - o diÃ¡logo DEVE aparecer

ðŸ’¾ Backups preservados em: backups/

root@vlxweb12:/var/www/assessment#